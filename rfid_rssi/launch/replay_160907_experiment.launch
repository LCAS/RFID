  <!-- 
        Tries to locate a tag using a particle filter. 
        Plays recorded data on alfie. We use amcl to correct odometry drifts
  -->
  
<launch>  

  <!--  Our bag
        -r X refers to replay speed -->
  <param name="use_sim_time" value="true" />  
  <node pkg="rosbag" type="play" name="player" output="screen" args=" --clock $(find rfid_rssi)/bags/160907_test_filtered.bag -r 10"/>
  

    <!--  Tag positions referred to map coordinates -->     
  <node pkg="tf" type="static_transform_publisher" name="tag_broadcaster07" args=" 2.816 -0.637 0 0 0 0 1 map rfid/tags/390000010000000000000007 100" />
  <node pkg="tf" type="static_transform_publisher" name="tag_broadcaster09" args=" 1.477  5.282 0 0 0 0 1 map rfid/tags/390000010000000000000009 100" />  
  <node pkg="tf" type="static_transform_publisher" name="tag_broadcaster14" args="-0.338  1.635 0 0 0 0 1 map rfid/tags/300833B2DDD9014000000014 100" />
  <node pkg="tf" type="static_transform_publisher" name="tag_broadcaster15" args=" 3.82  -1.24  0 0 0 0 1 map rfid/tags/390000010000000000000015 100" />

  <!--  Static map. Needed for amcl  
        Not needed, as we recorded data while correcting odometry -->     
  
  <node pkg="map_server" type="map_server" name="lcas_map" output="screen" args="$(find kompai_slam_lcas)/test/WW_GF_2015_02_22_cropped.yaml"/>

  <!--  AMCL with configuration for LCAS  -->     
  <!-- include file="$(find kompai_slam_lcas)/launch/amcl_diff.launch" / -->  
    
  
  <!--  Initial robot pose. Used by amcl as seed.
        Use rviz and rostopic echo to get a good Pose before anything else.-->             
  <node pkg="rostopic" type="rostopic" name="arbitrary_name" args="pub /initialpose geometry_msgs/PoseWithCovarianceStamped '{ header: { frame_id: '/map' }, pose: { pose: { position: { x: 4, y:  1.58 }, orientation: { x: 0.0, y: 0.0, z: -1, w: 0 } }, covariance: [ 0.25, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.25, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.06853891945200942 ] } }' -1" output="screen"/>

  <!--  Just for visualization purposes  -->     
  <node pkg="rviz" type="rviz" output="screen" name="rviz_node" args="-d $(find kompai_slam_lcas)/cfg/amcl.rviz"/>	

  <!--  Particle filter Node -->
  <!-- node pkg="rfid_rssi" type="scripts/localization.py" name="swarm"  output="screen"/ -->
  
</launch>
      
