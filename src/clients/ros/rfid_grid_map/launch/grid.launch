<launch>
  <!-- rfid_grid_map tracks an object, grid_map_visualization shows the layer.
        This file requires from a Regions yaml file to be loaded as params -->    
    
   
    
  <arg name="tagID"          default="390000010000000000000007"/>
  <arg name="object"         default="kitchen table"/>
  <arg name="saveRoute"      default=""/>
  <arg name="loadGrids"      default="false"/>
  <arg name="detectRadius"   default="2.0"/>
  <arg name="saveTime"       default="60.0"/>
  <arg name="map_resolution" default="0.3"/> 
  <arg name="weight_inc"     default="0.005"/> 
  <arg name="weight_dec"     default="0.001"/> 
  
      
  <group ns="grid_$(arg tagID)">
  <!-- Launch rfid_grid_map: locate objects -->
  <node pkg="rfid_grid_map" type="rfid_grid_map_node" name="rfid_grid_map_node" output="screen">
      <remap from="/rfid_grid_map/lastTag" to="/lastTag"/>	
      <rosparam param="global_frame">"/map"</rosparam>
      <rosparam param="tagID"          subst_value="True">"$(arg tagID)"</rosparam>        
      <rosparam param="detectRadius"   subst_value="True">"$(arg detectRadius)"</rosparam>        
      <rosparam param="map_resolution" subst_value="True">"$(arg map_resolution)"</rosparam>                        
      <rosparam param="object"         subst_value="True">"$(arg object)"</rosparam>        
      <rosparam param="saveRoute"      subst_value="True">"$(arg saveRoute)"</rosparam>        
      <rosparam param="loadGrids"      subst_value="True">"$(arg loadGrids)"</rosparam>
      <rosparam param="saveTime"       subst_value="True">"$(arg saveTime)"</rosparam>         
      <rosparam param="weight_inc"     subst_value="True">"$(arg weight_inc)"</rosparam>
      <rosparam param="weight_dec"     subst_value="True">"$(arg weight_dec)"</rosparam>  
    
  </node>
      
  <!-- Launch the grid map visualizer -->
  <node pkg="grid_map_visualization" type="grid_map_visualization" name="grid_map_visualization" output="screen">
    <rosparam command="load" file="$(find rfid_grid_map)/config/visualization.yaml" />
    <rosparam param="grid_map_topic" subst_value="True">/grid_$(arg tagID)/rfid_grid_map_node/grid_map</rosparam>    
  </node>
  
  </group>
  
  
</launch>
